{% extends "dashboard/dashboard_base.html" %}
{% load i18n %}
{% load widget_tweaks %}

{% block content_dashboard %}
<div class="row">
    <div class="col-12 grid-margin stretch-card">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">{% trans "Import Data" %}</h4>
                <p class="card-description">
                    {% trans "Import your file to the dashboard." %}
                    {% trans "Before start importing data, please make sure following things to ensure the import is successful:" %}
                </p>
                <ol class="card-description">
                    <li>{% trans "Format your file to .xlsx or .csv file" %}</li>
                    <li>{% trans "Sorted the top row of your column as listed below (scroll right the table) :" %}</li>
                    <div class="table-responsive">
                        <table class="table table-sm table-bordered">
                            <thead>
                                <tr>
                                    {% for f in fields  %}
                                        <th>
                                            {{ f }}
                                        </th>
                                    {% endfor %}
                                    </tr>
                            </thead>
                        </table>
                    </div>
                    <li>{% trans "Date column should be formatted as YYYY-MM-DD hh:mm:ss" %}</li>
                    <li>{% trans "Time_of_Incident should be formatted in 24-hour formats as hh:mm" %}</li>
                    <li>{% trans "Province, District, Incident_Type, Incident_Subtype, Initiator, Target, Incident_Source MUST have the exact same word as in our reference list. You can check all of the list in the admin page." %}</li>
                    <li>{% trans "Click Import Button" %}</li>
                </ol>
            </div>
        </div>
    </div>

    <div class="col-12 grid-margin stretch-card">
        <div class="card">
            <div class="card-body">
                {% if result.has_errors %}
                    <h4 class="card-title">{% trans "Errors" %}</h4>
                    <p class="card-description">
                    </p>
                {% else %}
                    <h4 class="card-title">{% trans "Preview" %}</h4>
                    <p class="card-description">
                    </p>
                {% endif %}
            </div>
        </div>
    </div>
</div>


{% endblock %}

{% block modal %}
    <!-- Modal -->
    <div class="modal fade" style="width: 100%; height: 100%;" id="_loading_upload" data-backdrop="static" data-keyboard="false" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1>Uploading...</h1>
                </div>
                <div class="modal-body">
                    <div class="progress">
                        <div class="progress-bar progress-bar-info progress-bar-striped active" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:100%">
                        Upload in progress...
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modal_preview" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Modal title</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                </div>
                <div class="modal-body">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save</button>
                </div>
            </div>
        </div>
    </div>
{% endblock modal %}

{% block dashboard_script %}
    <script>
        $("#submit_file").click(function(){
            // $('#modal_preview').modal('show'); 
            $('#_loading_upload').modal('toggle');
        });
    </script>
{% endblock %} 